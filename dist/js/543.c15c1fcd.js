"use strict";(self["webpackChunktubespaw_frontend"]=self["webpackChunktubespaw_frontend"]||[]).push([[543],{6543:function(e,t,o){o.r(t),o.d(t,{default:function(){return d}});var s=function(){var e=this,t=e._self._c;return t("v-main",{staticClass:"list"},[t("v-card",[t("v-list-item",[t("v-list-item-avatar",{attrs:{color:"white"}},[t("img",{attrs:{src:o(2327),alt:"Not found"}})]),t("v-list-item-content",[t("v-list-item-title",{staticClass:"headline"},[e._v("Service")]),t("v-list-item-subtitle",[e._v("---Silahkan Pesan Layanan anda---")])],1)],1),t("v-card-title",[t("v-text-field",{staticStyle:{"margin-top":"30px"},attrs:{"append-icon":"mdi-magnify",label:"Search",outlined:"",hide:"",details:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t("v-spacer"),t("v-btn",{attrs:{color:"success",dark:""},on:{click:function(t){e.dialog=!0}}},[e._v("Tambah")])],1)],1),t("v-card",[t("v-data-table",{attrs:{headers:e.headers,items:e.todos,search:e.search},scopedSlots:e._u([{key:"item.action",fn:function({item:o}){return[t("v-btn",{staticClass:"mr-2 blue-grey lighten-3",attrs:{small:""},on:{click:function(t){return e.editItem(o)}}},[e._v("edit")]),t("v-btn",{staticClass:"mr-2 blue-grey lighten-3",attrs:{small:""},on:{click:function(t){return e.deleteItem(o)}}},[e._v("delete")])]}},{key:"item.status_pembayaran",fn:function({item:t}){return[e._v(" "+e._s(1==t.status_pembayaran?"Lunas":"Belum Bayar")+" ")]}},{key:"item.id_service",fn:function({item:t}){return[e._v(" "+e._s(e.getNamaService(t.id_service))+" ")]}}],null,!0)})],1),t("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("v-card",[t("v-card-title",[t("span",{staticClass:"headline"},[e._v("Service")])]),t("v-card-text",[t("v-container",[0==e.formTodo.id_update?t("v-select",{attrs:{items:e.bookings,"item-text":"id","item-value":"id",label:"No Booking","persistent-hint":"","return-object":"","single-line":""},model:{value:e.formTodo.booking,callback:function(t){e.$set(e.formTodo,"booking",t)},expression:"formTodo.booking"}}):e._e(),t("v-select",{attrs:{items:["Lunas","Belum Lunas"],label:"Status Pembayaran",required:""},model:{value:e.formTodo.status_pembayaran,callback:function(t){e.$set(e.formTodo,"status_pembayaran",t)},expression:"formTodo.status_pembayaran"}}),t("v-select",{attrs:{items:e.services,"item-text":"nama_service","item-value":"id",label:"Nama Service","persistent-hint":"","return-object":"","single-line":""},model:{value:e.formTodo.service,callback:function(t){e.$set(e.formTodo,"service",t)},expression:"formTodo.service"}})],1)],1),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.cancel}},[e._v("Cancel")]),0==e.formTodo.id_update?t("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.addOrderServices}},[e._v("Save")]):t("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.updateOrderServices}},[e._v("Save")])],1)],1)],1)],1)},i=[],a=(o(7658),o(4311)),r={name:"ListItem",data(){return{formTodo:{booking:0,service:void 0,status_pembayaran:void 0,id_update:0},bookings:[],services:[],search:null,dialog:!1,headers:[{text:"No Booking",align:"start",sortable:!0,value:"id_booking"},{text:"Status Pembayaran",value:"status_pembayaran"},{text:"Nama Service",value:"id_service"},{text:"Action",value:"action"}],todos:[]}},mounted(){this.showBookings(),this.showOrderService(),this.showService()},methods:{save(){this.todos.push(this.formTodo),this.resetForm(),this.dialog=!1},cancel(){this.resetForm(),this.dialog=!1},resetForm(){this.formTodo={booking:void 0,service:void 0,status_pembayaran:void 0,id_update:0}},tambah(){this.dialog=!0},showBookings(){a.Z.get("https://frederikus.com/UAS_Hotel_B_Kel-A/public/api/bookings",{}).then((e=>{this.bookings=e.data.data,console.log(this.bookings)})).catch((e=>{console.log(e)}))},showOrderService(){a.Z.get("https://frederikus.com/UAS_Hotel_B_Kel-A/public/api/orderservices",{}).then((e=>{this.todos=e.data.data,this.todos[0].id_booking})).catch((e=>{console.log(e)}))},showService(){a.Z.get("https://frederikus.com/UAS_Hotel_B_Kel-A/public/api/services",{}).then((e=>{this.services=e.data.data,console.log(this.services)})).catch((e=>{console.log(e)}))},addOrderServices(){a.Z.post("https://frederikus.com/UAS_Hotel_B_Kel-A/public/api/orderservices",{id_booking:this.formTodo.booking.id,id_service:this.formTodo.service.id,status_pembayaran:"Lunas"==this.formTodo.status_pembayaran?1:0},{}).then((e=>{console.log(e),this.dialog=!1,this.showOrderService()})).catch((e=>{console.log(e.response.data)}))},editItem(e){alert(e.id_booking),this.formTodo.booking=e.id_booking,this.formTodo.status_pembayaran=1==e.status_pembayaran?"Lunas":"Belum Bayar",this.formTodo.service=this.getNamaServiceObj(e.id_service),this.dialog=!0,this.formTodo.id_update=e.id},updateOrderServices(){a.Z.put("https://frederikus.com/UAS_Hotel_B_Kel-A/public/api/orderservices/"+this.formTodo.id_update,{id_booking:this.formTodo.booking,id_service:this.formTodo.service.id,status_pembayaran:"Lunas"==this.formTodo.status_pembayaran?1:0},{}).then((e=>{console.log(e),this.dialog=!1,this.resetForm(),this.showOrderService()})).catch((e=>{console.log(e.response.data)}))},deleteItem(e){a.Z["delete"]("https://frederikus.com/UAS_Hotel_B_Kel-A/public/api/orderservices/"+e.id,{}).then((e=>{console.log(e),this.showOrderService()})).catch((e=>{console.log(e.response.data)}))},getNamaService(e){let t=this.services.find((t=>t.id==e));return t.nama_service},getNamaServiceObj(e){let t=this.services.find((t=>t.id==e));return t}}},n=r,c=o(1001),l=(0,c.Z)(n,s,i,!1,null,null,null),d=l.exports},2327:function(e,t,o){e.exports=o.p+"img/logo_rmvd.fe5e43da.png"}}]);
//# sourceMappingURL=543.c15c1fcd.js.map