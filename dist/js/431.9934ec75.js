"use strict";(self["webpackChunktubespaw_frontend"]=self["webpackChunktubespaw_frontend"]||[]).push([[431],{1431:function(a,t,e){e.r(t),e.d(t,{default:function(){return m}});var o=function(){var a=this,t=a._self._c;return t("v-main",{staticClass:"list"},[t("v-card",[t("v-list-item",[t("v-list-item-avatar",{attrs:{color:"white"}},[t("img",{attrs:{src:e(2327),alt:"Not found"}})]),t("v-list-item-content",[t("v-list-item-title",{staticClass:"headline"},[a._v("Bookings")]),t("v-list-item-subtitle",[a._v("---Silahkan Pesan Kamar---")])],1)],1),t("v-card-title",[t("v-text-field",{staticStyle:{"margin-top":"30px"},attrs:{"append-icon":"mdi-magnify",label:"Search",outlined:"",hide:"",details:""},model:{value:a.search,callback:function(t){a.search=t},expression:"search"}}),t("v-spacer"),t("v-btn",{attrs:{color:"success",dark:""},on:{click:a.tambah}},[a._v("Tambah")])],1)],1),t("v-card",[t("v-data-table",{attrs:{headers:a.headers,items:a.todos,search:a.search},scopedSlots:a._u([{key:"item.action",fn:function({item:e}){return[t("v-btn",{staticClass:"mr-2 blue-grey lighten-3",attrs:{small:""},on:{click:function(t){return a.editItem(e)}}},[a._v("edit")]),t("v-btn",{staticClass:"mr-2 blue-grey lighten-3",attrs:{small:""},on:{click:function(t){return a.deleteItem(e)}}},[a._v("delete")])]}},{key:"item.id_kamar",fn:function({item:t}){return[a._v(" "+a._s(a.getNameTipeKamar(t.id_kamar))+" ")]}},{key:"item.id_karyawan",fn:function({item:t}){return[a._v(" "+a._s(a.getNameKaryawan(t.id_karyawan))+" ")]}}],null,!0)})],1),t("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:a.dialog,callback:function(t){a.dialog=t},expression:"dialog"}},[t("v-card",[t("v-card-title",[t("span",{staticClass:"headline"},[a._v("Pesan Kamar")])]),t("v-card-text",[t("v-container",[t("v-select",{attrs:{items:a.kamars,"item-text":"tipe_kamar","item-value":"id",label:"Tipe Kamar","persistent-hint":"","return-object":"","single-line":""},model:{value:a.formTodo.kamar,callback:function(t){a.$set(a.formTodo,"kamar",t)},expression:"formTodo.kamar"}}),t("v-text-field",{attrs:{label:"Lama Inap",required:""},model:{value:a.formTodo.lama_menginap,callback:function(t){a.$set(a.formTodo,"lama_menginap",t)},expression:"formTodo.lama_menginap"}}),t("v-select",{attrs:{items:a.karyawans,"item-text":"nama","item-value":"id",label:"Nama Karyawan","persistent-hint":"","return-object":"","single-line":""},model:{value:a.formTodo.karyawan,callback:function(t){a.$set(a.formTodo,"karyawan",t)},expression:"formTodo.karyawan"}})],1)],1),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:a.cancel}},[a._v("Cancel")]),0==a.formTodo.id_update?t("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:a.addBookings}},[a._v("Save")]):t("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:a.updateBookings}},[a._v("Save")])],1)],1)],1)],1)},i=[],s=(e(7658),e(4311)),n={name:"ListItem",data(){return{formTodo:{kamar:void 0,lama_menginap:void 0,karyawan:void 0,id_update:0},kamars:[],karyawans:[],search:null,dialog:!1,headers:[{text:"Tipe Kamar",align:"start",sortable:!0,value:"id_kamar"},{text:"Lama Inap",value:"lama_menginap"},{text:"Nama Karyawn",value:"id_karyawan"},{text:"Action",value:"action"}],todos:[]}},mounted(){this.showBookings(),this.showKamar(),this.showKaryawans()},methods:{save(){this.todos.push(this.formTodo),this.resetForm(),this.dialog=!1},cancel(){this.resetForm(),this.dialog=!1},resetForm(){this.formTodo={kamar:void 0,lama_menginap:void 0,karyawan:void 0,id_update:0}},tambah(){this.dialog=!0},showKamar(){s.Z.get("https://frederikus.com/UAS_Hotel_B_Kel-A/public/api/kamars",{}).then((a=>{this.kamars=a.data.data,console.log(this.kamars)})).catch((a=>{console.log(a)}))},showBookings(){s.Z.get("https://frederikus.com/UAS_Hotel_B_Kel-A/public/api/bookings",{}).then((a=>{this.todos=a.data.data})).catch((a=>{console.log(a)}))},showKaryawans(){s.Z.get("https://frederikus.com/UAS_Hotel_B_Kel-A/public/api/karyawans",{}).then((a=>{this.karyawans=a.data.data,console.log(this.karyawans)})).catch((a=>{console.log(a)}))},addBookings(){s.Z.post("https://frederikus.com/UAS_Hotel_B_Kel-A/public/api/bookings",{id_user:1,id_kamar:this.formTodo.kamar.id,lama_menginap:this.formTodo.lama_menginap,status_pembayaran:1,stat_cekInOrOut:1,id_karyawan:this.formTodo.karyawan.id},{}).then((a=>{console.log(a),this.dialog=!1,this.showBookings()})).catch((a=>{console.log(a.response.data)}))},editItem(a){this.formTodo.id_update=a.id,this.formTodo.kamar=this.getNamaKamarObj(a.id_kamar),this.formTodo.lama_menginap=a.lama_menginap,this.formTodo.karyawan=this.getNamaKaryawanObj(a.id_karyawan),this.dialog=!0},updateBookings(){s.Z.put("https://frederikus.com/UAS_Hotel_B_Kel-A/public/api/bookings/"+this.formTodo.id_update,{id_user:1,id_kamar:this.formTodo.kamar.id,lama_menginap:this.formTodo.lama_menginap,status_pembayaran:1,stat_cekInOrOut:1,id_karyawan:this.formTodo.karyawan.id},{}).then((a=>{console.log(a),this.dialog=!1,this.resetForm(),this.showBookings()})).catch((a=>{console.log(a.response.data)}))},deleteItem(a){s.Z["delete"]("https://frederikus.com/UAS_Hotel_B_Kel-A/public/api/bookings/"+a.id,{}).then((a=>{console.log(a),this.showBookings()})).catch((a=>{console.log(a.response.data)}))},getNameTipeKamar(a){let t=this.kamars.find((t=>t.id==a));return t.tipe_kamar},getNameKaryawan(a){let t=this.karyawans.find((t=>t.id==a));return t.nama},getNamaKamarObj(a){let t=this.kamars.find((t=>t.id==a));return t},getNamaKaryawanObj(a){let t=this.karyawans.find((t=>t.id==a));return t}}},r=n,l=e(1001),d=(0,l.Z)(r,o,i,!1,null,null,null),m=d.exports},2327:function(a,t,e){a.exports=e.p+"img/logo_rmvd.fe5e43da.png"}}]);
//# sourceMappingURL=431.9934ec75.js.map